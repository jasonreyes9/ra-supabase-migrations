var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,s=(e,t)=>{for(var r in t||(t={}))n.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))o.call(t,r)&&l(e,r,t[r]);return e},c=(e,a)=>t(e,r(a)),i=(e,t)=>{var r={};for(var l in e)n.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&a)for(var l of a(e))t.indexOf(l)<0&&o.call(e,l)&&(r[l]=e[l]);return r};import{u as m,a as d,r as p,b as u,c as x,d as E,e as f,f as g,R as b,T as h,g as y,C as v,A as w,h as _,P as S,i as k,N as C,m as N,j as P,k as I,l as D,F as O,n as T,B as L,o as A,p as j,q as F,s as W,t as z,v as $,w as B,x as R,y as M,z as V,D as U,L as q,E as H,U as G,G as J,H as X,I as Y,J as K,K as Q,M as Z,O as ee,Q as te,S as re,V as ae,W as ne,X as oe,Y as le,Z as se,_ as ce,$ as ie,a0 as me,a1 as de,a2 as pe,a3 as ue,a4 as xe,a5 as Ee,a6 as fe,a7 as ge,a8 as be,a9 as he,aa as ye,ab as ve,ac as we,ad as _e,ae as Se,af as ke,ag as Ce,ah as Ne,ai as Pe,aj as Ie,ak as De,al as Oe,am as Te,an as Le,ao as Ae,ap as je,aq as Fe,ar as We,as as ze,at as $e,au as Be,av as Re,aw as Me,ax as Ve,ay as Ue,az as qe,aA as He,aB as Ge,aC as Je,aD as Xe,aE as Ye,aF as Ke,aG as Qe,aH as Ze,aI as et,aJ as tt,aK as rt,aL as at,aM as nt,aN as ot,aO as lt,aP as st,aQ as ct,aR as it,aS as mt,aT as dt,aU as pt,aV as ut,aW as xt,aX as Et,aY as ft,aZ as gt,a_ as bt,a$ as ht,b0 as yt,b1 as vt,b2 as wt,b3 as _t,b4 as St,b5 as kt,b6 as Ct,b7 as Nt,b8 as Pt,b9 as It,ba as Dt,bb as Ot,bc as Tt,bd as Lt,be as At,bf as jt,bg as Ft,bh as Wt,bi as zt,bj as $t,bk as Bt,bl as Rt,bm as Mt,bn as Vt,bo as Ut,bp as qt,bq as Ht,br as Gt,bs as Jt,bt as Xt,bu as Yt,bv as Kt,bw as Qt,bx as Zt,by as er,bz as tr,bA as rr,bB as ar,bC as nr,bD as or,bE as lr}from"./vendor.9159893b.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var sr=function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function l(e){try{c(a.next(e))}catch(t){o(t)}}function s(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(l,s)}c((a=a.apply(e,t||[])).next())}))},cr=function(e,t){var r,a,n,o,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(n=l.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){l.label=o[1];break}if(6===o[0]&&l.label<n[1]){l.label=n[1],n=o;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(o);break}n[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(s){o=[6,s],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ir=function(){return(ir=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},mr=function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function l(e){try{c(a.next(e))}catch(t){o(t)}}function s(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(l,s)}c((a=a.apply(e,t||[])).next())}))},dr=function(e,t){var r,a,n,o,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(n=l.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){l.label=o[1];break}if(6===o[0]&&l.label<n[1]){l.label=n[1],n=o;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(o);break}n[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(s){o=[6,s],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},pr=function(e){var t=e.client,r=e.resources,a=e.resource,n=e.params;return mr(void 0,void 0,void 0,(function(){var e,o,l,s,c,i,m,d,p,u,x,E,f,g,b;return dr(this,(function(h){switch(h.label){case 0:return e=n.pagination,o=n.sort,l=n.filter,s=l.q,c=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r}(l,["q"]),i=r[a],m=Array.isArray(i)?i:i.fields,d=(e.page-1)*e.perPage,p=d+e.perPage,u=t.from(a).select(m.join(", "),{count:"exact"}).order(o.field,{ascending:"ASC"===o.order}).match(c).range(d,p),s&&(x=Array.isArray(i)?i:i.fullTextSearchFields,u=u.or(x.map((function(e){return e+".ilike.%"+s+"%"})).join(","))),[4,u];case 1:if(E=h.sent(),f=E.data,g=E.error,b=E.count,g)throw g;return[2,{data:null!=f?f:[],total:null!=b?b:0}]}}))}))},ur=function(){return(ur=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},xr=function(e){var t=e.theme;e.title,e.classes;var r=e.className,a=e.children,n=e.notification;e.staticContext;var o=e.backgroundImage,l=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r}(e,["theme","title","classes","className","children","notification","staticContext","backgroundImage"]),s=p.exports.useRef(null),c=Er(e),i=p.exports.useMemo((function(){return g(t)}),[t]),m=!1,d=function(){!m&&s.current&&(s.current.style.backgroundImage="url("+o+")",m=!0)};return p.exports.useEffect((function(){m||function(){if(o){var e=new Image;e.onload=d,e.src=o}}()})),b.createElement(h,{theme:i},b.createElement("div",ur({className:y(c.main,r)},l,{ref:s}),b.createElement(v,{className:c.card},b.createElement("div",{className:c.avatar},b.createElement(w,{className:c.icon},b.createElement(_,null))),a),n?p.exports.createElement(n):null))};xr.propTypes={backgroundImage:S.string,children:S.node,classes:S.object,className:S.string,theme:S.object,staticContext:S.object},xr.defaultProps={theme:k,notification:C};var Er=N((function(e){return{main:{display:"flex",flexDirection:"column",minHeight:"100vh",height:"1px",alignItems:"center",justifyContent:"flex-start",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundImage:"radial-gradient(circle at 50% 14em, #313264 0%, #00023b 60%, #00023b 100%)"},card:{minWidth:300,marginTop:"6em"},avatar:{margin:"1em",display:"flex",justifyContent:"center"},icon:{backgroundColor:e.palette.grey[500]}}})),fr=function(){return(fr=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},gr=function(e){var t=e.meta,r=t.touched,a=t.error,n=e.input,o=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r}(e,["meta","input"]);return p.exports.createElement(P,fr({error:!(!r||!a),helperText:r&&a},n,o,{fullWidth:!0}))},br=function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function l(e){try{c(a.next(e))}catch(t){o(t)}}function s(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(l,s)}c((a=a.apply(e,t||[])).next())}))},hr=function(e,t){var r,a,n,o,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(n=l.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){l.label=o[1];break}if(6===o[0]&&l.label<n[1]){l.label=n[1],n=o;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(o);break}n[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(s){o=[6,s],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},yr=function(e){var t,r,a,n,o,l,s,c,i,m,d=vr(e),g=I(),b=function(e){var t=void 0===e?{}:e,r=t.redirectTo,a=void 0===r?"/":r,n=t.parameterName,o=void 0===n?"access_token":n,l=E(),s=new URLSearchParams(window.location.search.substr(1)).get(o);return p.exports.useEffect((function(){null==s&&!1!==a&&l(a)})),s}(),h=(a=(r=void 0===t?{}:t).signOutOnSuccess,n=void 0!==a&&a,o=r.redirectTo,l=void 0===o?"/":o,s=u(),c=x(),i=E(),m=f(),function(e){m.setPassword(e).then((function(){return n?c():i(l)})).catch((function(e){s(e.message,"error")}))});return p.exports.createElement(D,{onSubmit:function(e){return br(void 0,void 0,void 0,(function(){return hr(this,(function(t){switch(t.label){case 0:return[4,h({access_token:b,password:e.password})];case 1:return t.sent(),[2]}}))}))},validate:function(e){var t={email:void 0,password:void 0};return e.password||(t.password=g("ra.validation.required")),e.confirm_password&&e.confirm_password===e.password||(t.password="Passwords do not match"),t},render:function(e){var t=e.handleSubmit,r=e.submitting;return p.exports.createElement(p.exports.Fragment,null,p.exports.createElement("form",{onSubmit:t,noValidate:!0},p.exports.createElement("div",{className:d.form},p.exports.createElement("div",null,p.exports.createElement(O,{id:"password",name:"password",type:"password",component:gr,label:g("ra.auth.password"),disabled:r,autoComplete:"current-password"})),p.exports.createElement("div",null,p.exports.createElement(O,{id:"confirm_password",name:"confirm_password",type:"password",component:gr,label:g("ra-supabase.auth.confirm_password",{_:"Confirm password"}),disabled:r}))),p.exports.createElement(T,null,p.exports.createElement(L,{variant:"contained",type:"submit",color:"primary",disabled:r,className:d.button},r&&p.exports.createElement(A,{className:d.icon,size:18,thickness:2}),g("ra.auth.sign_in")))))}})},vr=N((function(e){return{form:{padding:"0 1em 1em 1em"},input:{marginTop:"1em"},button:{width:"100%"},icon:{marginRight:e.spacing(1)}}}),{name:"RaSupabaseSetPasswordForm"}),wr=function(e){var t=e.children,r=void 0===t?p.exports.createElement(yr,null):t;return p.exports.createElement(xr,null,r)},_r=[p.exports.createElement(j,{noLayout:!0,path:"/set-password",render:function(){return p.exports.createElement(wr,null)}})],Sr=function(){var e=kr(),t=F(),r=u(),a=I();return p.exports.createElement(D,{onSubmit:function(e){return t(e).catch((function(e){r("string"==typeof e?e:void 0!==e&&e.message?e.message:"ra.auth.sign_in_error","warning",{_:"string"==typeof e?e:e&&e.message?e.message:void 0})}))},validate:function(e){var t={email:void 0,password:void 0};return e.email||(t.email=a("ra.validation.required")),e.password||(t.password=a("ra.validation.required")),t},render:function(t){var r=t.handleSubmit,n=t.submitting;return p.exports.createElement("form",{onSubmit:r,noValidate:!0},p.exports.createElement("div",{className:e.form},p.exports.createElement("div",{className:e.input},p.exports.createElement(O,{autoFocus:!0,id:"email",name:"email",type:"email",component:gr,label:a("ra-supabase.auth.email",{_:"Email"}),disabled:n})),p.exports.createElement("div",null,p.exports.createElement(O,{id:"password",name:"password",type:"password",component:gr,label:a("ra.auth.password"),disabled:n,autoComplete:"current-password"}))),p.exports.createElement(T,null,p.exports.createElement(L,{variant:"contained",type:"submit",color:"primary",disabled:n,className:e.button},n&&p.exports.createElement(A,{className:e.icon,size:18,thickness:2}),a("ra.auth.sign_in"))))}})},kr=N((function(e){return{form:{padding:"0 1em 1em 1em"},input:{marginTop:"1em"},button:{width:"100%"},icon:{marginRight:e.spacing(1)}}}),{name:"RaSupabaseLoginForm"}),Cr=function(e){var t,r,a=e.children,n=void 0===a?p.exports.createElement(Sr,null):a;return t=m(),r=d(),p.exports.useEffect((function(){r({},!1).then((function(){t.push("/")})).catch((function(){}))}),[r,t]),p.exports.createElement(xr,null,n)};const Nr=W("https://dzrbkxelgffnphpnzmjs.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYyNDAwNjk2NCwiZXhwIjoxOTM5NTgyOTY0fQ.8WzV7oJXeWM_4S5sXIlm15zrUi-OYtKr-nM9WS2ySs0"),Pr=(Ir=Nr,Dr={companies:{fields:["id","name","sector","size","linkedIn","website","phone_number","address","zipcode","city","stateAbbr","nb_contacts","nb_deals","sales_id","created_at"],fullTextSearchFields:["name","sector","website","address","city","stateAbbr"]},contactNotes:{fields:["id","contact_id","type","text","date","sales_id","status"],fullTextSearchFields:["type","text","status"]},contacts:{fields:["id","first_name","last_name","gender","title","company_id","email","phone_number1","phone_number2","background","acquisition","first_seen","last_seen","has_newsletter","status","tags","sales_id","nb_notes"],fullTextSearchFields:["first_name","last_name","gender","title","email","background","acquisition","status"]},dealNotes:{fields:["id","deal_id","type","text","date","sales_id"],fullTextSearchFields:["type","text"]},deals:{fields:["id","name","company_id","contact_ids","type","stage","description","amount","created_at","updated_at","start_at","sales_id","index","nb_notes"],fullTextSearchFields:["name","type","stage","description"]},sales:{fields:["id","first_name","last_name","email"],fullTextSearchFields:["first_name","last_name","email"]},tags:{fields:["id","name","color"],fullTextSearchFields:["name"]},tasks:{fields:["id","contact_id","type","text","due_date","sales_id"],fullTextSearchFields:["type","text"]}},{getList:function(e,t){return mr(void 0,void 0,void 0,(function(){return dr(this,(function(r){return[2,pr({client:Ir,resources:Dr,resource:e,params:t})]}))}))},getOne:function(e,t){var r=t.id;return mr(void 0,void 0,void 0,(function(){var t,a,n,o,l;return dr(this,(function(s){switch(s.label){case 0:return t=Dr[e],a=Array.isArray(t)?t:t.fields,[4,Ir.from(e).select(a.join(", ")).match({id:r}).single()];case 1:if(n=s.sent(),o=n.data,l=n.error)throw l;return[2,{data:o}]}}))}))},getMany:function(e,t){var r=t.ids;return mr(void 0,void 0,void 0,(function(){var t,a,n,o,l;return dr(this,(function(s){switch(s.label){case 0:return t=Dr[e],a=Array.isArray(t)?t:t.fields,[4,Ir.from(e).select(a.join(", ")).in("id",r)];case 1:if(n=s.sent(),o=n.data,l=n.error)throw l;return[2,{data:null!=o?o:[]}]}}))}))},getManyReference:function(e,t){return mr(void 0,void 0,void 0,(function(){var r,a,n,o;return dr(this,(function(l){return r=t.target,a=t.id,n=ir(ir({},t),{filter:ir(ir({},t.filter),(o={},o[r]=a,o))}),[2,pr({client:Ir,resources:Dr,resource:e,params:n})]}))}))},create:function(e,t){var r=t.data;return mr(void 0,void 0,void 0,(function(){var t,a,n;return dr(this,(function(o){switch(o.label){case 0:return[4,Ir.from(e).insert(r).single()];case 1:if(t=o.sent(),a=t.data,n=t.error)throw n;return[2,{data:a}]}}))}))},update:function(e,t){var r=t.id,a=t.data;return mr(void 0,void 0,void 0,(function(){var t,n,o;return dr(this,(function(l){switch(l.label){case 0:return[4,Ir.from(e).update(a).match({id:r}).single()];case 1:if(t=l.sent(),n=t.data,o=t.error)throw o;return[2,{data:n}]}}))}))},updateMany:function(e,t){var r=t.ids,a=t.data;return mr(void 0,void 0,void 0,(function(){var t,n,o;return dr(this,(function(l){switch(l.label){case 0:return[4,Ir.from(e).update(a).in("id",r)];case 1:if(t=l.sent(),n=t.data,o=t.error)throw o;return[2,{data:null==n?void 0:n.map((function(e){return e.id}))}]}}))}))},delete:function(e,t){var r=t.id;return mr(void 0,void 0,void 0,(function(){var t,a,n;return dr(this,(function(o){switch(o.label){case 0:return[4,Ir.from(e).delete().match({id:r}).single()];case 1:if(t=o.sent(),a=t.data,n=t.error)throw n;return[2,{data:a}]}}))}))},deleteMany:function(e,t){var r=t.ids;return mr(void 0,void 0,void 0,(function(){var t,a,n;return dr(this,(function(o){switch(o.label){case 0:return[4,Ir.from(e).delete().match({id:r})];case 1:if(t=o.sent(),a=t.data,n=t.error)throw n;return[2,{data:null==a?void 0:a.map((function(e){return e.id}))}]}}))}))}});var Ir,Dr;const Or=function(e,t){var r=t.getIdentity;return{login:function(t){var r=t.email,a=t.password;return sr(this,void 0,void 0,(function(){var t;return cr(this,(function(n){switch(n.label){case 0:return[4,e.auth.signIn({email:r,password:a})];case 1:if(t=n.sent().error)throw t;return[2,void 0]}}))}))},setPassword:function(t){var r=t.access_token,a=t.password;return sr(this,void 0,void 0,(function(){var t;return cr(this,(function(n){switch(n.label){case 0:return[4,e.auth.api.updateUser(r,{password:a})];case 1:if(t=n.sent().error)throw t;return[2,void 0]}}))}))},logout:function(){return sr(this,void 0,void 0,(function(){var t;return cr(this,(function(r){switch(r.label){case 0:return[4,e.auth.signOut()];case 1:if(t=r.sent().error)throw t;return[2]}}))}))},checkError:function(){return Promise.resolve()},checkAuth:function(){if("/set-password"===window.location.pathname)return Promise.resolve();var t=new URLSearchParams(window.location.hash.substr(1)),r=t.get("access_token"),a=t.get("type");return r&&"recovery"===a||r&&"invite"===a?Promise.reject({redirectTo:"set-password?access_token="+r}):null==e.auth.session()?Promise.reject():Promise.resolve()},getPermissions:function(){return Promise.reject("Unknown method")},getIdentity:function(){return sr(this,void 0,void 0,(function(){var t;return cr(this,(function(a){switch(a.label){case 0:if(!(t=e.auth.user()))throw new Error;return"function"!=typeof r?[3,2]:[4,r(t)];case 1:return[2,a.sent()];case 2:return[2,void 0]}}))}))}}}(Nr,{getIdentity:async e=>{const{data:t,error:r}=await Nr.from("sales").select("id, first_name, last_name").match({email:null==e?void 0:e.email}).single();if(!t||r)throw new Error;return{id:t.id,fullName:`${t.first_name} ${t.last_name}`}}}),Tr=N({root:{flexGrow:1},logo:{width:50,height:43.54}}),Lr=()=>{var e;const t=Tr(),r=z(["/contacts","/companies","/deals"]),a=null!=(e=null==r?void 0:r.path)?e:"/";return b.createElement("nav",{className:t.root},b.createElement($,{position:"static",color:"primary"},b.createElement(B,{variant:"dense"},b.createElement(R,{flex:1,display:"flex",justifyContent:"space-between"},b.createElement(R,{display:"flex",alignItems:"center"},b.createElement("img",{className:t.logo,src:"https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg",alt:"Bosch Logo"}),b.createElement(M,{component:"span",variant:"h5"},"Atomic CRM")),b.createElement(R,null,b.createElement(V,{value:a,"aria-label":"Navigation Tabs"},b.createElement(U,{label:"Dashboard",component:q,to:"/",value:"/"}),b.createElement(U,{label:"Contacts",component:q,to:"/contacts",value:"/contacts"}),b.createElement(U,{label:"Companies",component:q,to:"/companies",value:"/companies"}),b.createElement(U,{label:"Deals",component:q,to:"/deals",value:"/deals"}))),b.createElement(R,{display:"flex",alignItems:"center"},b.createElement(H,null),b.createElement(G,{logout:b.createElement(J,{button:!0})}))))))};class Ar extends p.exports.Component{constructor(e){super(e),this.state={hasError:!1,errorMessage:void 0,errorInfo:void 0},e.history.listen((()=>{this.state.hasError&&this.setState({hasError:!1})}))}componentDidCatch(e,t){this.setState({hasError:!0,errorMessage:e.message,errorInfo:t})}render(){const{theme:e,title:t,children:r}=this.props,{hasError:a,errorMessage:n,errorInfo:o}=this.state;return b.createElement(h,{theme:g(e)},b.createElement(Y,null),b.createElement(Lr,null),b.createElement(K,null,b.createElement("main",{id:"main-content"},a?b.createElement(Q,{error:n,errorInfo:o,title:t}):r)),b.createElement(C,null))}}Ar.propTypes={children:S.oneOfType([S.func,S.node]),title:S.node.isRequired};var jr=X(Ar);const Fr=({record:e})=>p.exports.createElement(w,{src:e.avatar},e.first_name.charAt(0),e.last_name.charAt(0)),Wr=["#eddcd2","#fff1e6","#fde2e4","#fad2e1","#c5dedd","#dbe7e4","#f0efeb","#d6e2e9","#bcd4e6","#99c1de"],zr=({record:e})=>{const[t,r]=p.exports.useState(!1),[a,n]=p.exports.useState(""),[o,l]=p.exports.useState(Wr[0]),[s,c]=p.exports.useState(null),[i,m]=p.exports.useState(0),[d,u]=p.exports.useState(!1),{data:x,ids:E}=Z("tags",{page:1,perPage:10},{field:"name",order:"ASC"},{},{version:i}),{data:f,loaded:g}=ee("tags",e.tags,{enabled:e.tags&&e.tags.length>0}),[b]=te(),[h]=re(),y=E&&E.filter((t=>!e.tags.includes(t))),v=t=>{const r=[...e.tags,t];b("contacts",e.id,{tags:r},e),c(null)},w=()=>{r(!0),c(null),u(!1)};return g&&f?p.exports.createElement(p.exports.Fragment,null,f.map((t=>p.exports.createElement(R,{mt:1,mb:1,key:t.id},p.exports.createElement(ae,{size:"small",variant:"outlined",onDelete:()=>(t=>{const r=e.tags.filter((e=>e!==t));b("contacts",e.id,{tags:r},e)})(t.id),label:t.name,style:{backgroundColor:t.color,border:0}})))),p.exports.createElement(R,{mt:1},p.exports.createElement(ae,{icon:p.exports.createElement(ne,null),size:"small",variant:"outlined",onClick:e=>{c(e.currentTarget)},label:"Add tag",color:"primary"})),p.exports.createElement(oe,{open:Boolean(s),onClose:()=>{c(null)},anchorEl:s},null==y?void 0:y.map((e=>p.exports.createElement(le,{key:e,onClick:()=>v(e)},p.exports.createElement(ae,{size:"small",variant:"outlined",label:x&&x[e].name,style:{backgroundColor:x&&x[e].color,border:0},onClick:()=>v(e)})))),p.exports.createElement(le,{onClick:w},p.exports.createElement(ae,{icon:p.exports.createElement(se,null),size:"small",variant:"outlined",onClick:w,color:"primary",label:"Create new tag"}))),p.exports.createElement(ce,{open:t,onClose:()=>r(!1),"aria-labelledby":"form-dialog-title"},p.exports.createElement("form",{onSubmit:t=>{t.preventDefault(),u(!0),h("tags",{name:a,color:o},{onSuccess:({data:t})=>{b("contacts",e.id,{tags:[...e.tags,t.id]},e,{onSuccess:()=>{n(""),l(Wr[0]),r(!1),m((e=>e+1))}})}})}},p.exports.createElement(ie,{id:"form-dialog-title"},"Create a new tag"),p.exports.createElement(me,null,p.exports.createElement(P,{autoFocus:!0,label:"Tag name",fullWidth:!0,value:a,onChange:e=>{n(e.target.value)}}),p.exports.createElement(R,{display:"flex",flexWrap:"wrap",width:230,mt:2},Wr.map((e=>p.exports.createElement(Br,{key:e,color:e,selected:e===o,handleClick:()=>{l(e)}}))))),p.exports.createElement(de,null,p.exports.createElement(L,{onClick:()=>r(!1),color:"primary"},"Cancel"),p.exports.createElement(L,{type:"submit",color:"primary",disabled:d},"Add tag"))))):null},$r=N({root:{width:30,height:30,borderRadius:15,display:"inline-block",margin:8}}),Br=({color:e,handleClick:t,selected:r})=>{const a=$r();return p.exports.createElement("button",{type:"button",className:a.root,style:{backgroundColor:e,border:r?"2px solid grey":"none"},onClick:t})},Rr=({record:e,link:t="edit"})=>p.exports.createElement(R,{ml:4,width:250,minWidth:250},p.exports.createElement(R,{textAlign:"center",mb:2},"edit"===t?p.exports.createElement(pe,{basePath:"/contacts",record:e,label:"Edit Contact"}):p.exports.createElement(ue,{basePath:"/contacts",record:e,label:"Show Contact"})),p.exports.createElement(M,{variant:"subtitle2"},"Personal info"),p.exports.createElement(xe,null),p.exports.createElement(R,{mt:2},p.exports.createElement(Ee,{source:"email"})),p.exports.createElement(R,{mt:1},p.exports.createElement(fe,{source:"phone_number1"})," ",p.exports.createElement(M,{variant:"body2",color:"textSecondary",component:"span"},"Work")),p.exports.createElement(R,{mb:1},p.exports.createElement(fe,{source:"phone_number2"})," ",p.exports.createElement(M,{variant:"body2",color:"textSecondary",component:"span"},"Home")),p.exports.createElement(R,{mb:3},p.exports.createElement(M,{variant:"body2"},"male"===e.gender?"He/Him":"She/Her")),p.exports.createElement(M,{variant:"subtitle2"},"Background"),p.exports.createElement(xe,null),p.exports.createElement(R,{mt:2},e&&e.background),p.exports.createElement(R,{mt:1,mb:3},p.exports.createElement(M,{component:"span",variant:"body2",color:"textSecondary"},"Added on")," ",p.exports.createElement(ge,{source:"first_seen",options:{year:"numeric",month:"long",day:"numeric"},color:"textSecondary"}),p.exports.createElement("br",null),p.exports.createElement(M,{component:"span",variant:"body2",color:"textSecondary"},"Last seen on")," ",p.exports.createElement(ge,{source:"last_seen",options:{year:"numeric",month:"long",day:"numeric"},color:"textSecondary"}),p.exports.createElement("br",null),p.exports.createElement(M,{component:"span",variant:"body2",color:"textSecondary"},"Followed by")," ",p.exports.createElement(be,{resource:"contacts",source:"sales_id",reference:"sales"},p.exports.createElement(he,{source:"last_name",render:e=>e?`${e.first_name} ${e.last_name}`:""}))),p.exports.createElement(R,{mb:3},p.exports.createElement(M,{variant:"subtitle2"},"Tags"),p.exports.createElement(xe,null),p.exports.createElement(zr,{record:e})),p.exports.createElement(ye,{resource:"contacts",target:"contact_id",reference:"tasks"},p.exports.createElement(Mr,null))),Mr=()=>{const{data:e,ids:t,loading:r}=ve();return r||0===t.length?null:p.exports.createElement(R,null,p.exports.createElement(M,{variant:"subtitle2"},"Tasks"),p.exports.createElement(xe,null),p.exports.createElement(we,null,t.map((t=>{const r=e[t];return p.exports.createElement(_e,{key:t,disableGutters:!0},p.exports.createElement(R,null,p.exports.createElement(M,{variant:"body2"},r.text),p.exports.createElement(M,{variant:"body2",color:"textSecondary"},"due"," ",p.exports.createElement(ge,{source:"due_date",record:r}))))}))))},Vr=N({avatar:{width:60,height:60,backgroundColor:"aliceblue"},image:{objectFit:"contain"},small:{width:20,height:20},medium:{width:30,height:30},large:{width:40,height:40}}),Ur=({record:e,source:t,size:r="medium"})=>{const a=Vr();return e?p.exports.createElement(w,{src:e.logo,alt:e.name,title:e.name,className:a.image,imgProps:{className:Se(a.image,a[r])}}):null},qr=e=>"cold"===e?"#7dbde8":"warm"===e?"#e8cb7d":"hot"===e?"#e88b7d":"in-contract"===e?"#a4e87d":"#000",Hr=({status:e})=>p.exports.createElement(R,{width:10,height:10,display:"inline-block",borderRadius:5,bgcolor:qr(e),component:"span"}),Gr=N({root:{width:150}}),Jr=({status:e,setStatus:t,className:r=""})=>{const a=Gr();return p.exports.createElement(P,{select:!0,value:e,onChange:e=>{t(e.target.value)},variant:"filled",label:!1,margin:"none",size:"small",className:Se(r,a.root)},p.exports.createElement(le,{value:"cold"},"Cold ",p.exports.createElement(Hr,{status:"cold"})),p.exports.createElement(le,{value:"warm"},"Warm ",p.exports.createElement(Hr,{status:"warm"})),p.exports.createElement(le,{value:"hot"},"Hot ",p.exports.createElement(Hr,{status:"hot"})),p.exports.createElement(le,{value:"in-contract"},"In Contract ",p.exports.createElement(Hr,{status:"in-contract"})))},Xr=N((e=>({root:{marginTop:e.spacing(4),marginBottom:e.spacing(1)},toolbar:{display:"flex",justifyContent:"space-between",marginTop:e.spacing(1)},small:{marginRight:"1em","& .MuiFilledInput-input":{paddingTop:10}}}))),Yr=({showStatus:e,reference:t})=>{const r=Xr(),a=ke(),n=Ce(),[o,l]=p.exports.useState(""),[s,c]=p.exports.useState(a&&a.status),[i,m]=p.exports.useState(Kr()),[d,{loading:x}]=re(),[E]=te(),f=Ne(),g=u(),{identity:b}=Pe();if(!a||!b)return null;return p.exports.createElement("div",{className:r.root},p.exports.createElement("form",{onSubmit:r=>{r.preventDefault();const c={[Qr[t]]:a.id,sales_id:b.id,date:i,text:o};return e&&(c.status=s),E(t,a&&a.id,{last_seen:i,status:s,nb_notes:a.nb_notes+1},a),d(n,c,{onSuccess:()=>{l(""),g("Note added successfully"),f()}}),!1}},p.exports.createElement(P,{label:"Add a note",variant:"filled",size:"small",fullWidth:!0,multiline:!0,value:o,onChange:e=>l(e.target.value),rows:3}),p.exports.createElement("div",{className:r.toolbar},p.exports.createElement("span",null,o?p.exports.createElement(p.exports.Fragment,null,e&&p.exports.createElement(Jr,{status:s,setStatus:c,className:r.small}),p.exports.createElement(P,{type:"datetime-local",variant:"filled",size:"small",value:i,onChange:e=>{m(e.target.value)},className:r.small})):null),p.exports.createElement(L,{type:"submit",variant:"contained",color:"primary",disabled:!o||x},"Add this note"))))},Kr=()=>{const e=new Date;return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toISOString().slice(0,-1)},Qr={contacts:"contact_id",deals:"deal_id"},Zr=N((e=>({root:{marginBottom:e.spacing(2)},metadata:{marginBottom:e.spacing(1),color:e.palette.text.secondary},textarea:{paddingTop:16,paddingLeft:14,paddingRight:60,paddingBottom:14,lineHeight:1.3},buttons:{display:"flex",justifyContent:"flex-end",marginTop:e.spacing(1)},cancel:{marginRight:e.spacing(1)},content:{backgroundColor:"#edf3f0",padding:"0 1em",borderRadius:10,display:"flex",alignItems:"stretch",marginBottom:e.spacing(1)},text:{flex:1},paragraph:{fontFamily:e.typography.fontFamily,fontSize:e.typography.body1.fontSize,lineHeight:1.3,marginBottom:e.spacing(2.4)},toolbar:{marginLeft:e.spacing(2),visibility:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-around"}}))),ea=({showStatus:e,note:t,isLast:r,reference:a})=>{const[n,o]=p.exports.useState(!1),[l,s]=p.exports.useState(!1),[c,i]=p.exports.useState(t.text),m=Ce(),d=ke(),x=u(),E=Zr(),[f,{loading:g}]=te(),[b]=Ie(m,t.id,t,{mutationMode:"undoable",onSuccess:()=>{x("Note deleted",void 0,void 0,!0),f(a,d.id,{nb_notes:d.nb_notes-1},d)}});return p.exports.createElement("div",{className:E.root,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1)},p.exports.createElement("div",{className:E.metadata},p.exports.createElement(be,{record:t,resource:"contactNotes",source:"sales_id",reference:"sales",basePath:"/contactNotes"},p.exports.createElement(fe,{source:"first_name",variant:"body1"}))," ",p.exports.createElement(M,{component:"span",variant:"body1"},"added a note on"," "),p.exports.createElement(ge,{source:"date",record:t,variant:"body1",showTime:!0,locales:"en",options:{dateStyle:"full",timeStyle:"short"}})," ",e&&p.exports.createElement(Hr,{status:t.status})),l?p.exports.createElement("form",{onSubmit:e=>{e.preventDefault(),f(m,t.id,{text:c},t,{onSuccess:()=>{s(!1),i(t.text),o(!1)}})}},p.exports.createElement(De,{value:c,onChange:e=>{i(e.target.value)},fullWidth:!0,multiline:!0,className:E.textarea,autoFocus:!0}),p.exports.createElement("div",{className:E.buttons},p.exports.createElement(L,{className:E.cancel,onClick:()=>{s(!1),i(t.text),o(!1)},color:"primary"},"Cancel"),p.exports.createElement(L,{type:"submit",color:"primary",variant:"contained",disabled:g},"Update Note"))):p.exports.createElement("div",{className:E.content},p.exports.createElement("div",{className:E.text},t.text.split("\n").map(((e,t)=>p.exports.createElement("p",{className:E.paragraph,key:t},e)))),p.exports.createElement("div",{className:E.toolbar,style:{visibility:n?"visible":"hidden"}},p.exports.createElement(Oe,{title:"Edit note"},p.exports.createElement(Te,{size:"small",onClick:()=>{s(!0)}},p.exports.createElement(se,null))),p.exports.createElement(Oe,{title:"Delete note"},p.exports.createElement(Te,{size:"small",onClick:b},p.exports.createElement(Le,null))))))},ta=N({root:{marginTop:"0.5em"}}),ra=({showStatus:e,reference:t})=>{const r=ta(),{data:a,ids:n,loaded:o}=ve();return o?p.exports.createElement(p.exports.Fragment,null,p.exports.createElement(Yr,{showStatus:e,reference:t}),p.exports.createElement("div",{className:r.root},n.map(((r,o)=>p.exports.createElement(ea,{note:a[r],isLast:o===n.length-1,showStatus:e,reference:t,key:o}))))):null},aa=()=>{const{record:e,loaded:t}=je();return t&&e?p.exports.createElement(R,{mt:2,display:"flex"},p.exports.createElement(R,{flex:"1"},p.exports.createElement(v,null,p.exports.createElement(Fe,null,p.exports.createElement(R,{display:"flex"},p.exports.createElement(Fr,{record:e}),p.exports.createElement(R,{ml:2,flex:"1"},p.exports.createElement(M,{variant:"h5"},e.first_name," ",e.last_name),p.exports.createElement(M,{variant:"body2"},e.title," at"," ",p.exports.createElement(be,{source:"company_id",reference:"companies",link:"show"},p.exports.createElement(fe,{source:"name"})))),p.exports.createElement(R,null,p.exports.createElement(be,{source:"company_id",reference:"companies",link:"show"},p.exports.createElement(Ur,null)))),p.exports.createElement(ye,{target:"contact_id",reference:"contactNotes",sort:{field:"date",order:"DESC"}},p.exports.createElement(ra,{showStatus:!0,reference:"contacts"}))))),p.exports.createElement(Rr,{record:e})):null},na=e=>{var t=e,{record:r}=t,a=i(t,["record"]);return r?p.exports.createElement($e,c(s({record:r},a),{style:{backgroundColor:r.color,border:0},component:"span"})):null},oa=N({root:{display:"inline-block"}}),la=({record:e})=>{const t=oa();return e?p.exports.createElement(We,{record:e,basePath:"/contacts",resource:"contacts",source:"tags",reference:"tags",className:t.root},p.exports.createElement(ze,{linkType:!1,component:"span"},p.exports.createElement(na,{source:"name",variant:"outlined",size:"small"}))):null},sa=()=>{const{identity:e}=Pe(),{data:t,ids:r}=Z("tags",{page:1,perPage:10},{field:"name",order:"ASC"});return p.exports.createElement(R,{width:"15em",order:"-1",marginRight:"1em"},p.exports.createElement(Be,null),p.exports.createElement(Re,{label:"Last seen",icon:p.exports.createElement(Me,null)},p.exports.createElement(Ve,{label:"Today",value:{last_seen_gte:Ue().toISOString(),last_seen_lte:void 0}}),p.exports.createElement(Ve,{label:"This week",value:{last_seen_gte:qe(new Date).toISOString(),last_seen_lte:void 0}}),p.exports.createElement(Ve,{label:"Before this week",value:{last_seen_gte:void 0,last_seen_lte:qe(new Date).toISOString()}}),p.exports.createElement(Ve,{label:"Before this month",value:{last_seen_gte:void 0,last_seen_lte:He(new Date).toISOString()}}),p.exports.createElement(Ve,{label:"Before last month",value:{last_seen_gte:void 0,last_seen_lte:Ge(He(new Date),1).toISOString()}})),p.exports.createElement(Re,{label:"Status",icon:p.exports.createElement(Je,null)},p.exports.createElement(Ve,{label:p.exports.createElement(p.exports.Fragment,null,"Cold ",p.exports.createElement(Hr,{status:"cold"})),value:{status:"cold"}}),p.exports.createElement(Ve,{label:p.exports.createElement(p.exports.Fragment,null,"Warm ",p.exports.createElement(Hr,{status:"warm"})),value:{status:"warm"}}),p.exports.createElement(Ve,{label:p.exports.createElement(p.exports.Fragment,null,"Hot ",p.exports.createElement(Hr,{status:"hot"})),value:{status:"hot"}}),p.exports.createElement(Ve,{label:p.exports.createElement(p.exports.Fragment,null,"In contract ",p.exports.createElement(Hr,{status:"in-contract"})),value:{status:"in-contract"}})),p.exports.createElement(Re,{label:"Tags",icon:p.exports.createElement(Xe,null)},r&&t&&r.map((e=>{var r,a;return p.exports.createElement(Ve,{key:e,label:p.exports.createElement(ae,{label:null==(r=t[e])?void 0:r.name,size:"small",style:{backgroundColor:null==(a=t[e])?void 0:a.color,border:0,cursor:"pointer"}}),value:{tags:[e]}})}))),p.exports.createElement(Re,{label:"Account manager",icon:p.exports.createElement(Ye,null)},p.exports.createElement(Ve,{label:"Me",value:{sales_id:e&&e.id}})))},ca=()=>{const{data:e,ids:t,loaded:r,onToggleItem:a,selectedIds:n}=ve(),o=Date.now();return!1===r?p.exports.createElement(Ze,{hasLeftAvatarOrIcon:!0,hasSecondaryText:!0}):p.exports.createElement(we,null,t.map((t=>{const r=e[t];return p.exports.createElement(_e,{button:!0,key:t,component:q,to:`/contacts/${t}/show`},p.exports.createElement(et,null,p.exports.createElement(tt,{edge:"start",checked:n.includes(t),tabIndex:-1,disableRipple:!0,onClick:e=>{e.stopPropagation(),a(t)}})),p.exports.createElement(rt,null,p.exports.createElement(Fr,{record:r})),p.exports.createElement(at,{primary:`${r.first_name} ${r.last_name}`,secondary:p.exports.createElement(p.exports.Fragment,null,r.title," at"," ",p.exports.createElement(be,{record:r,source:"company_id",reference:"companies",basePath:"/companies",link:!1},p.exports.createElement(fe,{source:"name"}))," ",r.nb_notes&&`- ${r.nb_notes} notes `,p.exports.createElement(la,{record:r}))}),p.exports.createElement(nt,null,p.exports.createElement(M,{variant:"body2",color:"textSecondary"},"last activity"," ",ot(new Date(r.last_seen),o)," ","ago ",p.exports.createElement(Hr,{status:r.status}))))})))},ia=N((e=>({createButton:{marginLeft:e.spacing(2)}}))),ma=()=>{const e=ia();return p.exports.createElement(lt,null,p.exports.createElement(st,{fields:["last_name","first_name","last_seen"]}),p.exports.createElement(ct,null),p.exports.createElement(it,{basePath:"/contacts",variant:"contained",label:"New Contact",className:e.createButton}))},da=()=>p.exports.createElement(R,{width:20,component:"span"}),pa=()=>{const{record:e,loaded:t,save:r}=dt();return t&&e?p.exports.createElement(R,{mt:2,display:"flex"},p.exports.createElement(R,{flex:"1"},p.exports.createElement(pt,{record:e,redirect:"show",save:r,render:t=>p.exports.createElement(v,null,p.exports.createElement(Fe,null,p.exports.createElement(R,null,p.exports.createElement(R,{display:"flex"},p.exports.createElement(R,{mr:2},p.exports.createElement(Fr,{record:e})),p.exports.createElement(R,{flex:"1",mt:-1},p.exports.createElement(R,{display:"flex"},p.exports.createElement(ut,{source:"first_name"}),p.exports.createElement(da,null),p.exports.createElement(ut,{source:"last_name"})),p.exports.createElement(R,{display:"flex"},p.exports.createElement(ut,{source:"title"}),p.exports.createElement(da,null),p.exports.createElement(xt,{source:"company_id",reference:"companies"},p.exports.createElement(Et,{optionText:"name"}))),p.exports.createElement(xe,null),p.exports.createElement(R,{mt:2,width:430},p.exports.createElement(ut,{source:"email",fullWidth:!0})),p.exports.createElement(R,{display:"flex"},p.exports.createElement(ut,{source:"phone_number1"}),p.exports.createElement(da,null),p.exports.createElement(ut,{source:"phone_number2"})),p.exports.createElement(xe,null),p.exports.createElement(R,{mt:2,width:430},p.exports.createElement(ut,{source:"background",multiline:!0,fullWidth:!0}),p.exports.createElement(ut,{source:"avatar",fullWidth:!0}),p.exports.createElement(ft,{source:"has_newsletter"})))))),p.exports.createElement(gt,s({},bt(t,["dirtyFields","dirtyFieldsSinceLastSubmit","dirtySinceLastSubmit","hasSubmitErrors","hasValidationErrors","initialValues","modifiedSinceLastSubmit","submitError","submitErrors","submitFailed","submitSucceeded","submitting","valid"]))))})),p.exports.createElement(Rr,{record:e,link:"show"})):null},ua=()=>p.exports.createElement(R,{width:20,component:"span"}),xa=()=>{const{identity:e}=Pe(),{save:t,record:r}=yt();return p.exports.createElement(R,{mt:2,display:"flex"},p.exports.createElement(R,{flex:"1"},p.exports.createElement(pt,{redirect:"show",record:r,save:t,initialValues:{sales_id:null==e?void 0:e.id},render:e=>p.exports.createElement(v,null,p.exports.createElement(Fe,null,p.exports.createElement(R,null,p.exports.createElement(R,{display:"flex"},p.exports.createElement(R,{mr:2},p.exports.createElement(w,null)),p.exports.createElement(R,{flex:"1",mt:-1},p.exports.createElement(R,{display:"flex"},p.exports.createElement(ut,{source:"first_name",validate:[vt()]}),p.exports.createElement(ua,null),p.exports.createElement(ut,{source:"last_name",validate:[vt()]})),p.exports.createElement(R,{display:"flex"},p.exports.createElement(ut,{source:"title"}),p.exports.createElement(ua,null),p.exports.createElement(xt,{source:"company_id",reference:"companies"},p.exports.createElement(Et,{optionText:"name"}))),p.exports.createElement(xe,null),p.exports.createElement(R,{mt:2,width:430},p.exports.createElement(ut,{source:"email",fullWidth:!0})),p.exports.createElement(R,{display:"flex"},p.exports.createElement(ut,{source:"phone_number1"}),p.exports.createElement(ua,null),p.exports.createElement(ut,{source:"phone_number2"})),p.exports.createElement(xe,null),p.exports.createElement(R,{mt:2,width:430},p.exports.createElement(ut,{source:"background",multiline:!0,fullWidth:!0}),p.exports.createElement(ut,{source:"avatar",fullWidth:!0}),p.exports.createElement(ft,{source:"has_newsletter"})))))),p.exports.createElement(gt,s({},e)))})))};var Ea={list:e=>{const{identity:t}=Pe();return t?p.exports.createElement(Ke,c(s({},e),{actions:p.exports.createElement(ma,null),aside:p.exports.createElement(sa,null),perPage:25,pagination:p.exports.createElement(Qe,{rowsPerPageOptions:[10,25,50,100]}),filterDefaultValues:{sales_id:null==t?void 0:t.id},sort:{field:"last_seen",order:"DESC"}}),p.exports.createElement(ca,null)):null},show:e=>p.exports.createElement(Ae,s({},e),p.exports.createElement(aa,null)),edit:e=>p.exports.createElement(mt,s({},e),p.exports.createElement(pa,null)),create:e=>p.exports.createElement(ht,c(s({},e),{transform:e=>c(s({},e),{last_seen:new Date,tags:[]})}),p.exports.createElement(xa,null))};const fa=["Tech for good","Not text for good"].map((e=>({id:e,name:e}))),ga=N({avatar:{width:60,height:60,backgroundColor:"aliceblue"},img:{objectFit:"contain"},small:{width:20,height:20},medium:{width:30,height:30},large:{width:40,height:40}}),ba=({record:e,size:t="large"})=>{const r=ga();return e?p.exports.createElement(w,{src:e.logo,alt:e.name,className:r.avatar,imgProps:{className:Se(r.img,r[t])}}):null},ha=N((e=>({paper:{height:200,width:193.5,display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"1em"},identity:{display:"flex",flexDirection:"column",alignItems:"center"},name:{textAlign:"center",marginTop:e.spacing(1)},stats:{display:"flex",justifyContent:"space-around",width:"100%"},singleStat:{display:"flex",alignItems:"center"},statIcon:{marginRight:e.spacing(1)}}))),ya=({record:e})=>{const t=ha(),[r,a]=p.exports.useState(1);return p.exports.createElement(wt,{component:q,to:_t("/companies",e.id,"show"),underline:"none",onMouseEnter:()=>a(3),onMouseLeave:()=>a(1)},p.exports.createElement(St,{className:t.paper,elevation:r},p.exports.createElement("div",{className:t.identity},p.exports.createElement(ba,{record:e}),p.exports.createElement("div",{className:t.name},p.exports.createElement(M,{variant:"subtitle2"},e.name),p.exports.createElement(kt,{color:"textSecondary",source:"sector",choices:fa,record:e}))),p.exports.createElement("div",{className:t.stats},p.exports.createElement("div",{className:t.singleStat},p.exports.createElement(Ct,{color:"disabled",className:t.statIcon}),p.exports.createElement("div",null,p.exports.createElement(M,{variant:"subtitle2",style:{marginBottom:-8}},e.nb_contacts),p.exports.createElement(M,{variant:"caption",color:"textSecondary"},e.nb_contacts>1?"contacts":"contact"))),p.exports.createElement("div",{className:t.singleStat},p.exports.createElement(Nt,{color:"disabled",className:t.statIcon}),p.exports.createElement("div",null,p.exports.createElement(M,{variant:"subtitle2",style:{marginBottom:-8}},e.nb_deals),p.exports.createElement(M,{variant:"caption",color:"textSecondary"},e.nb_deals>1?"deals":"deal"))))))},va=N((e=>({gridList:{display:"flex",flexWrap:"wrap",width:1008,gap:"10px"},paper:{height:200,width:194,display:"flex",flexDirection:"column",backgroundColor:e.palette.grey[200]}}))),wa=()=>{const e=va();return p.exports.createElement(R,{className:e.gridList},(t=15,r=t=>p.exports.createElement(St,{className:e.paper,key:t}),Array.from({length:t},((e,t)=>r(t)))));var t,r},_a=()=>{const{ids:e,data:t}=ve(),r=va();return e&&t?p.exports.createElement(R,{className:r.gridList},e.map((e=>p.exports.createElement(ya,{key:e,record:t[e]})))):null},Sa=()=>{const{loaded:e}=ve();return e?p.exports.createElement(_a,null):p.exports.createElement(wa,null)},ka=[{id:1,name:"1 employee"},{id:10,name:"2-9 employees"},{id:50,name:"10-49 employees"},{id:250,name:"50-249 employees"},{id:500,name:"250 or more employees"}],Ca=()=>{const{identity:e}=Pe();return p.exports.createElement(R,{width:"15em",order:"-1",marginRight:"1em"},p.exports.createElement(Be,null),p.exports.createElement(Re,{label:"Size",icon:p.exports.createElement(Pt,null)},ka.map((e=>p.exports.createElement(Ve,{key:e.id,label:e.name,value:{size:e.id}})))),p.exports.createElement(Re,{label:"Sector",icon:p.exports.createElement(It,null)},fa.map((e=>p.exports.createElement(Ve,{key:e.id,label:e.name,value:{sector:e.id}})))),p.exports.createElement(Re,{label:"Account manager",icon:p.exports.createElement(Ye,null)},p.exports.createElement(Ve,{label:"Me",value:{sales_id:e&&e.id}})))},Na=N((e=>({createButton:{marginLeft:e.spacing(2)}}))),Pa=e=>{const t=Na();return p.exports.createElement(lt,null,p.exports.createElement(ct,null),p.exports.createElement(it,{basePath:"/companies",variant:"contained",label:"New Company",className:t.createButton}))},Ia=N({inline:{display:"inline-block",marginLeft:"1em","&.first-child":{marginLeft:0}}}),Da=e=>p.exports.createElement(Fe,null,p.exports.createElement(R,{display:"flex"},p.exports.createElement(R,{paddingTop:1},p.exports.createElement(w,null,p.exports.createElement(Pt,null))),p.exports.createElement(R,{ml:2,flex:"1",maxWidth:796},e.children))),Oa=()=>p.exports.createElement(R,{mb:2},p.exports.createElement(xe,null)),Ta=({record:e,link:t="edit"})=>e?p.exports.createElement(R,{ml:4,width:250,minWidth:250},p.exports.createElement(R,{textAlign:"center",mb:2},"edit"===t?p.exports.createElement(pe,{basePath:"/companies",record:e,label:"Edit Company"}):p.exports.createElement(ue,{basePath:"/companies",record:e,label:"Show Company"})),p.exports.createElement(M,{variant:"subtitle2"},"Company info"),p.exports.createElement(xe,null),p.exports.createElement(R,{mt:2},"Website: ",p.exports.createElement(wt,{href:e.website},e.website),p.exports.createElement("br",null),"LinkedIn: ",p.exports.createElement(wt,{href:e.linkedIn},"LinkedIn")),p.exports.createElement(R,{mt:1},p.exports.createElement(fe,{source:"phone_number",record:e})," ",p.exports.createElement(M,{variant:"body2",color:"textSecondary",component:"span"},"Main")),p.exports.createElement(R,{mt:1,mb:3},p.exports.createElement(fe,{source:"address"}),p.exports.createElement("br",null),p.exports.createElement(fe,{source:"city"})," ",p.exports.createElement(fe,{source:"zipcode"})," ",p.exports.createElement(fe,{source:"stateAbbr"})),p.exports.createElement(M,{variant:"subtitle2"},"Background"),p.exports.createElement(xe,null),p.exports.createElement(R,{mt:1},p.exports.createElement(M,{variant:"body2",color:"textSecondary",component:"span"},"Added on")," ",p.exports.createElement(ge,{source:"created_at",options:{year:"numeric",month:"long",day:"numeric"},color:"textSecondary"}),p.exports.createElement("br",null),p.exports.createElement(M,{component:"span",variant:"body2",color:"textSecondary"},"Followed by")," ",p.exports.createElement(be,{resource:"companies",source:"sales_id",reference:"sales"},p.exports.createElement(he,{source:"last_name",render:e=>e?`${e.first_name} ${e.last_name}`:""})))):null,La=["opportunity","proposal-sent","in-negociation","won","lost","delayed"],Aa={opportunity:"Opportunity","proposal-sent":"Proposal Sent","in-negociation":"In Negociation",won:"Won",lost:"Lost",delayed:"Delayed"},ja=La.map((e=>({id:e,name:Aa[e]}))),Fa=()=>{const{record:e,loaded:t}=je(),[r,a]=p.exports.useState(0);return t&&e?p.exports.createElement(R,{mt:2,display:"flex"},p.exports.createElement(R,{flex:"1"},p.exports.createElement(v,null,p.exports.createElement(Fe,null,p.exports.createElement(R,{display:"flex",mb:1},p.exports.createElement(Ur,{record:e}),p.exports.createElement(R,{ml:2,flex:"1"},p.exports.createElement(M,{variant:"h5"},e.name),p.exports.createElement(M,{variant:"body2"},p.exports.createElement(fe,{source:"sector"}),","," ",p.exports.createElement(kt,{source:"size",choices:ka})))),p.exports.createElement(V,{value:r,indicatorColor:"primary",textColor:"primary",onChange:(e,t)=>{a(t)}},e.nb_contacts&&p.exports.createElement(U,{label:1===e.nb_contacts?"1 Contact":`${e.nb_contacts} Contacts`}),e.nb_deals&&p.exports.createElement(U,{label:1===e.nb_deals?"1 deal":`${e.nb_deals} Deals`})),p.exports.createElement(xe,null),p.exports.createElement(Wa,{value:r,index:0},p.exports.createElement(ye,{reference:"contacts",target:"company_id",sort:{field:"last_name",order:"ASC"}},p.exports.createElement(za,null))),p.exports.createElement(Wa,{value:r,index:1},p.exports.createElement(ye,{reference:"deals",target:"company_id",sort:{field:"name",order:"ASC"}},p.exports.createElement(Ba,null)))))),p.exports.createElement(Ta,{record:e})):null},Wa=e=>{const t=e,{children:r,value:a,index:n}=t,o=i(t,["children","value","index"]);return p.exports.createElement("div",s({role:"tabpanel",hidden:a!==n,id:`wrapped-tabpanel-${n}`,"aria-labelledby":`wrapped-tab-${n}`},o),r)},za=()=>{const{data:e,ids:t,loaded:r}=ve(),a=ke(),n=Date.now();return r?p.exports.createElement(R,null,p.exports.createElement(we,null,t.map((t=>{const r=e[t];return p.exports.createElement(_e,{button:!0,key:t,component:q,to:`/contacts/${t}/show`},p.exports.createElement(rt,null,p.exports.createElement(Fr,{record:r})),p.exports.createElement(at,{primary:`${r.first_name} ${r.last_name}`,secondary:p.exports.createElement(p.exports.Fragment,null,r.title," ",p.exports.createElement(la,{record:r}))}),p.exports.createElement(nt,null,p.exports.createElement(M,{variant:"body2",color:"textSecondary",component:"span"},"last activity"," ",ot(new Date(r.last_seen),n)," ","ago ",p.exports.createElement(Hr,{status:r.status}))))}))),p.exports.createElement(R,{textAlign:"center",mt:1},p.exports.createElement($a,{record:a}))):null},$a=({record:e})=>p.exports.createElement(L,{component:q,to:{pathname:"/contacts/create",state:{record:{company_id:e.id}}},color:"primary",variant:"contained",size:"small",startIcon:p.exports.createElement(Lt,null)},"Add contact"),Ba=()=>{const{data:e,ids:t,loaded:r}=ve(),a=Date.now();return r?p.exports.createElement(R,null,p.exports.createElement(we,null,t.map((t=>{const r=e[t];return p.exports.createElement(_e,{button:!0,key:t,component:q,to:`/deals/${t}/show`},p.exports.createElement(at,{primary:r.name,secondary:p.exports.createElement(p.exports.Fragment,null,Aa[r.stage],","," ",r.amount.toLocaleString("en-US",{notation:"compact",style:"currency",currency:"USD",currencyDisplay:"narrowSymbol",minimumSignificantDigits:3}),", ",r.type)}),p.exports.createElement(nt,null,p.exports.createElement(M,{variant:"body2",color:"textSecondary",component:"span"},"last activity"," ",ot(new Date(r.updated_at),a)," ","ago"," ")))})))):null},Ra=N({inline:{display:"inline-block",marginLeft:"1em","&.first-child":{marginLeft:0}}}),Ma=e=>{const t=ke(e);return p.exports.createElement(Fe,null,p.exports.createElement(R,{display:"flex"},p.exports.createElement(Ur,{record:t}),p.exports.createElement(R,{ml:2,flex:"1",maxWidth:796},e.children)))},Va=()=>p.exports.createElement(R,{mb:2},p.exports.createElement(xe,null));var Ua={list:e=>{const{identity:t}=Pe();return console.log({identity:t}),t?p.exports.createElement(Ke,c(s({},e),{actions:p.exports.createElement(Pa,null),aside:p.exports.createElement(Ca,null),filterDefaultValues:{sales_id:null==t?void 0:t.id},pagination:p.exports.createElement(Qe,{rowsPerPageOptions:[15,25,50,100]}),perPage:25,sort:{field:"name",order:"ASC"},component:"div"}),p.exports.createElement(Sa,null)):null},create:e=>{const t=Ia(),{identity:r}=Pe();return p.exports.createElement(Dt,c(s({},e),{actions:!1}),p.exports.createElement(Ot,{component:Da,redirect:"show",initialValues:{sales_id:null==r?void 0:r.id}},p.exports.createElement(ut,{source:"name",validate:vt(),fullWidth:!0}),p.exports.createElement(Tt,{source:"sector",choices:fa,formClassName:Se(t.inline,"first-child")}),p.exports.createElement(Tt,{source:"size",choices:ka,formClassName:t.inline}),p.exports.createElement(Oa,null),p.exports.createElement(ut,{source:"address",fullWidth:!0,helperText:!1}),p.exports.createElement(ut,{source:"city",formClassName:Se(t.inline,"first-child")}),p.exports.createElement(ut,{source:"zipcode",formClassName:t.inline}),p.exports.createElement(ut,{source:"stateAbbr",formClassName:t.inline}),p.exports.createElement(Oa,null),p.exports.createElement(ut,{source:"website",fullWidth:!0,helperText:!1}),p.exports.createElement(ut,{source:"linkedIn",fullWidth:!0,helperText:!1}),p.exports.createElement(ut,{source:"logo",fullWidth:!0}),p.exports.createElement(Oa,null),p.exports.createElement(ut,{source:"phone_number",formClassName:Se(t.inline,"first-child"),helperText:!1}),p.exports.createElement(xt,{source:"sales_id",reference:"sales",label:"Account manager",formClassName:t.inline,helperText:!1},p.exports.createElement(Tt,{optionText:e=>`${e.first_name} ${e.last_name}`,validate:vt()}))))},edit:e=>{const t=Ra();return p.exports.createElement(At,c(s({},e),{aside:p.exports.createElement(Ta,{link:"show"}),actions:!1}),p.exports.createElement(Ot,{component:Ma,redirect:"show"},p.exports.createElement(ut,{source:"name",validate:vt(),fullWidth:!0}),p.exports.createElement(Tt,{source:"sector",choices:fa,formClassName:Se(t.inline,"first-child")}),p.exports.createElement(Tt,{source:"size",choices:ka,formClassName:t.inline}),p.exports.createElement(Va,null),p.exports.createElement(ut,{source:"address",fullWidth:!0,helperText:!1}),p.exports.createElement(ut,{source:"city",formClassName:Se(t.inline,"first-child")}),p.exports.createElement(ut,{source:"zipcode",formClassName:t.inline}),p.exports.createElement(ut,{source:"stateAbbr",formClassName:t.inline}),p.exports.createElement(Va,null),p.exports.createElement(ut,{source:"website",fullWidth:!0,helperText:!1}),p.exports.createElement(ut,{source:"linkedIn",fullWidth:!0,helperText:!1}),p.exports.createElement(ut,{source:"logo",fullWidth:!0}),p.exports.createElement(Va,null),p.exports.createElement(ut,{source:"phone_number",formClassName:Se(t.inline,"first-child"),helperText:!1}),p.exports.createElement(xt,{source:"sales_id",reference:"sales",label:"Account manager",formClassName:t.inline,helperText:!1},p.exports.createElement(Tt,{optionText:e=>`${e.first_name} ${e.last_name}`}))))},show:e=>p.exports.createElement(Ae,s({},e),p.exports.createElement(Fa,null))};const qa=N((e=>({root:{marginBottom:e.spacing(1)},cardContent:{padding:e.spacing(1),display:"flex"},cardText:{marginLeft:e.spacing(1)}}))),Ha=({deal:e,index:t})=>{const r=qa(),a=E();if(!e)return null;const n=()=>{a(`/deals/${e.id}/show`)};return p.exports.createElement(jt,{draggableId:String(e.id),index:t},((t,a)=>p.exports.createElement("div",c(s(s({className:r.root},t.draggableProps),t.dragHandleProps),{ref:t.innerRef,onClick:n}),p.exports.createElement(v,{style:{opacity:a.isDragging?.9:1,transform:a.isDragging?"rotate(-2deg)":""},elevation:a.isDragging?3:1},p.exports.createElement("div",{className:r.cardContent},p.exports.createElement(be,{source:"company_id",record:e,reference:"companies",resource:"deals",basePath:"/deals"},p.exports.createElement(Ur,{size:"small"})),p.exports.createElement("div",{className:r.cardText},p.exports.createElement(M,{variant:"body2",gutterBottom:!0},e.name),p.exports.createElement(M,{variant:"caption",color:"textSecondary"},e.amount.toLocaleString("en-US",{notation:"compact",style:"currency",currency:"USD",currencyDisplay:"narrowSymbol",minimumSignificantDigits:3}),", ",e.type)))))))},Ga=N({root:{flex:1,paddingTop:8,paddingBottom:16,backgroundColor:"#eaeaee","&:first-child":{paddingLeft:5,borderTopLeftRadius:5},"&:last-child":{paddingRight:5,borderTopRightRadius:5}},droppable:{display:"flex",flexDirection:"column",borderRadius:5,padding:5,"&.isDraggingOver":{backgroundColor:"#dadadf"}}}),Ja=({stage:e,dealIds:t,data:r})=>{const a=Ga();return p.exports.createElement("div",{className:a.root},p.exports.createElement(M,{align:"center",variant:"subtitle1"},Aa[e]),p.exports.createElement(Ft,{droppableId:e},((e,n)=>p.exports.createElement("div",c(s({ref:e.innerRef},e.droppableProps),{className:a.droppable+(n.isDraggingOver?" isDraggingOver":"")}),t.map(((e,t)=>p.exports.createElement(Ha,{key:e,index:t,deal:r[e]}))),e.placeholder))))},Xa=La.reduce(((e,t)=>c(s({},e),{[t]:[]})),{}),Ya=(e,t)=>{const r=e.reduce(((e,r)=>(e[t[r].stage].push(r),e)),La.reduce(((e,t)=>c(s({},e),{[t]:[]})),{}));return La.forEach((e=>{r[e]=r[e].sort(((e,r)=>t[e].index-t[r].index))})),r},Ka=()=>{const{data:e,ids:t,loaded:r,page:a,perPage:n,currentSort:o,filterValues:l}=ve(),[i,m]=p.exports.useState(r?Ya(t,e):Xa),d=p.exports.useContext(Wt),[u]=zt({resource:"deals",type:"getList",payload:{pagination:{page:a,perPage:n},sort:o,filter:l}});if(p.exports.useEffect((()=>{if(!r)return;const a=Ya(t,e);$t(i,a)||m(a)}),[e,t,r]),!r)return null;return p.exports.createElement(Bt,{onDragEnd:async t=>{var r;const{destination:a,source:n,draggableId:o}=t;if(a&&(a.droppableId!==n.droppableId||a.index!==n.index))if(n.droppableId===a.droppableId){const t=Array.from(i[n.droppableId]),r=e[t[n.index]],l=e[t[a.index]];t.splice(n.index,1),t.splice(a.index,0,Number(o)),m(c(s({},i),{[n.droppableId]:t}));const{data:p}=await d.getList("deals",{sort:{field:"index",order:"ASC"},pagination:{page:1,perPage:100},filter:{stage:n.droppableId}});n.index>a.index?(await Promise.all([...p.filter((e=>e.index>=l.index&&e.index<r.index)).map((e=>d.update("deals",{id:e.id,data:{index:e.index+1},previousData:e}))),d.update("deals",{id:r.id,data:{index:l.index},previousData:r})]),u()):(await Promise.all([...p.filter((e=>e.index<=l.index&&e.index>r.index)).map((e=>d.update("deals",{id:e.id,data:{index:e.index-1},previousData:e}))),d.update("deals",{id:r.id,data:{index:l.index},previousData:r})]),u())}else{const t=Array.from(i[n.droppableId]),l=Array.from(i[a.droppableId]),p=e[t[n.index]],x=e[l[a.index]];t.splice(n.index,1),l.splice(a.index,0,o),m(c(s({},i),{[n.droppableId]:t,[a.droppableId]:l}));const[{data:E},{data:f}]=await Promise.all([d.getList("deals",{sort:{field:"index",order:"ASC"},pagination:{page:1,perPage:100},filter:{stage:n.droppableId}}),d.getList("deals",{sort:{field:"index",order:"ASC"},pagination:{page:1,perPage:100},filter:{stage:a.droppableId}})]);await Promise.all([...E.filter((e=>e.index>p.index)).map((e=>d.update("deals",{id:e.id,data:{index:e.index-1},previousData:e}))),...f.filter((e=>!!x&&e.index>=x.index)).map((e=>d.update("deals",{id:e.id,data:{index:e.index+1},previousData:e}))),d.update("deals",{id:p.id,data:{index:x?x.index:((null==(r=f.pop())?void 0:r.index)||0)+1,stage:a.droppableId},previousData:p})]),u()}}},p.exports.createElement(R,{display:"flex"},La.map((t=>p.exports.createElement(Ja,{stage:t,dealIds:i[t],data:e,key:t})))))},Qa=["React-admin Enterprise","GreenFrame","Innovation"].map((e=>({id:e,name:e}))),Za=N({root:{width:500}}),en=({open:e})=>{const t=Za(),r=E(),a=Rt(),{identity:n}=Pe();return p.exports.createElement(ce,{open:e,onClose:()=>{r("/deals")}},p.exports.createElement(Dt,{resource:"deals",basePath:"/deals",className:t.root,onSuccess:({data:e})=>{r("/deals"),a.getList("deals",{pagination:{page:1,perPage:50},sort:{field:"id",order:"ASC"},filter:{stage:e.stage}}).then((({data:t})=>Promise.all(t.filter((t=>t.id!==e.id)).map((e=>a.update("deals",{id:e.id,data:{index:e.index+1},previousData:e}))))))}},p.exports.createElement(Ot,{initialValues:{index:0,sales_id:null==n?void 0:n.id}},p.exports.createElement(ut,{source:"name",label:"Deal name",fullWidth:!0,validate:[vt()]}),p.exports.createElement(ut,{source:"description",multiline:!0,rows:3,fullWidth:!0}),p.exports.createElement(xt,{source:"company_id",reference:"companies",fullWidth:!0,validate:[vt()]},p.exports.createElement(Et,{optionText:"name"})),p.exports.createElement(Tt,{source:"stage",choices:ja,fullWidth:!0,validate:[vt()],defaultValue:"opportunity"}),p.exports.createElement(Tt,{source:"type",choices:Qa,fullWidth:!0}),p.exports.createElement(Mt,{source:"amount",fullWidth:!0,defaultValue:0}))))},tn=N({ul:{listStyle:"none",padding:0,margin:0,display:"inline-block"},li:{display:"inline","&:after":{content:'", "'},"&:last-child:after":{content:'""'}}}),rn=()=>{const{ids:e,data:t,loaded:r}=ve(),a=tn();return r?p.exports.createElement("ul",{className:a.ul},e.map((e=>p.exports.createElement("li",{key:e,className:a.li},p.exports.createElement(wt,{component:q,to:`/contacts/${e}`,variant:"subtitle1"},t[e].first_name," ",t[e].last_name))))):p.exports.createElement("div",{style:{height:"2em"}})},an=N({dialog:{position:"absolute",top:50}}),nn=({open:e,id:t})=>{const r=E(),a=an();return p.exports.createElement(ce,{open:e,onClose:()=>{r("/deals")},fullWidth:!0,maxWidth:"md",classes:{paper:a.dialog}},p.exports.createElement(Ae,{resource:"deals",basePath:"/deals",id:t},p.exports.createElement(me,null,p.exports.createElement(on,null))))},on=()=>{const e=ke();return e?p.exports.createElement(p.exports.Fragment,null,p.exports.createElement(R,{display:"flex"},p.exports.createElement(R,{width:100,display:"flex",flexDirection:"column",alignItems:"center"},p.exports.createElement(be,{source:"company_id",reference:"companies",link:"show"},p.exports.createElement(ba,null)),p.exports.createElement(be,{source:"company_id",reference:"companies",link:"show"},p.exports.createElement(fe,{source:"name",align:"center",component:"div"}))),p.exports.createElement(R,{ml:2,flex:"1"},p.exports.createElement(M,{variant:"h5"},e.name),p.exports.createElement(R,{display:"flex",mt:2},p.exports.createElement(R,{display:"flex",mr:5,flexDirection:"column"},p.exports.createElement(M,{color:"textSecondary",variant:"body2"},"Start"),p.exports.createElement(M,{variant:"subtitle1"},Vt(new Date(e.start_at),"PP"))),p.exports.createElement(R,{display:"flex",mr:5,flexDirection:"column"},p.exports.createElement(M,{color:"textSecondary",variant:"body2"},"Budget"),p.exports.createElement(M,{variant:"subtitle1"},e.amount.toLocaleString("en-US",{notation:"compact",style:"currency",currency:"USD",currencyDisplay:"narrowSymbol",minimumSignificantDigits:3}))),p.exports.createElement(R,{display:"flex",mr:5,flexDirection:"column"},p.exports.createElement(M,{color:"textSecondary",variant:"body2"},"Type"),p.exports.createElement(M,{variant:"subtitle1"},e.type)),p.exports.createElement(R,{display:"flex",mr:5,flexDirection:"column"},p.exports.createElement(M,{color:"textSecondary",variant:"body2"},"Stage"),p.exports.createElement(M,{variant:"subtitle1"},Aa[e.stage]))),p.exports.createElement(R,{mt:2,mb:2},p.exports.createElement(R,{display:"flex",mr:5,flexDirection:"column",minHeight:48},p.exports.createElement(M,{color:"textSecondary",variant:"body2"},"Contacts"),p.exports.createElement(We,{source:"contact_ids",reference:"contacts"},p.exports.createElement(rn,null)))),p.exports.createElement(R,{mt:2,mb:2,style:{whiteSpace:"pre-line"}},p.exports.createElement(M,{color:"textSecondary",variant:"body2"},"Description"),p.exports.createElement(M,null,e.description)),p.exports.createElement(xe,null),p.exports.createElement(R,{mt:2},p.exports.createElement(ye,{target:"deal_id",reference:"dealNotes",sort:{field:"date",order:"DESC"}},p.exports.createElement(ra,{reference:"deals"}))))),p.exports.createElement(de,null,p.exports.createElement(Ut,{undoable:!0,record:e}))):null},ln=N((e=>({root:{marginBottom:e.spacing(1),marginLeft:e.spacing(1)}}))),sn=({alwaysOn:e})=>{const{filterValues:t,displayedFilters:r,setFilters:a}=qt(),{identity:n}=Pe(),o=ln();return p.exports.createElement("div",{className:o.root},p.exports.createElement(Ht,{control:p.exports.createElement(Gt,{checked:void 0!==t.sales_id,onChange:()=>{const e=s({},t);void 0!==t.sales_id?delete e.sales_id:e.sales_id=n&&(null==n?void 0:n.id),a(e,r)},color:"primary",name:"checkedC"}),label:"Only companies I manage"}))};sn.defaultProps={source:"sales_id"};const cn=e=>p.exports.createElement(Xt,s({},e),p.exports.createElement(Yt,{source:"q",alwaysOn:!0}),p.exports.createElement(sn,{alwaysOn:!0}),p.exports.createElement(Tt,{source:"type",choices:Qa})),mn=N((e=>({createButton:{marginLeft:e.spacing(2)}}))),dn=e=>{const t=mn();return p.exports.createElement(lt,null,p.exports.createElement(cn,{context:"button"}),p.exports.createElement(ct,null),p.exports.createElement(it,{basePath:"/deals",variant:"contained",label:"New Deal",className:t.createButton}))};var pn={list:e=>{const{identity:t}=Pe();return t?p.exports.createElement(p.exports.Fragment,null,p.exports.createElement(Ke,c(s({},e),{perPage:100,sort:{field:"index",order:"ASC"},filters:p.exports.createElement(cn,null),filterDefaultValues:{sales_id:t&&(null==t?void 0:t.id)},actions:p.exports.createElement(dn,null),pagination:!1,component:"div"}),p.exports.createElement(Ka,null)),p.exports.createElement(Jt,{path:"/deals/create"},(({match:e})=>p.exports.createElement(en,{open:!!e}))),p.exports.createElement(Jt,{path:"/deals/:id/show"},(({match:e})=>{var t;return e?p.exports.createElement(nn,{open:!!e,id:null==(t=null==e?void 0:e.params)?void 0:t.id}):null}))):null}};const un={opportunity:.2,"proposal-sent":.5,"in-negociation":.8,delayed:.3},xn=()=>{const{data:e,ids:t,loaded:r}=Z("deals",{perPage:100,page:1},{field:"start_at",order:"ASC"}),[a,n]=p.exports.useState([]);if(p.exports.useEffect((()=>{const r=t.map((t=>e[t])).reduce(((e,t)=>{const r=He(new Date(t.start_at)).toISOString();return e[r]||(e[r]=[]),e[r].push(t),e}),{}),a=Object.keys(r).map((e=>({date:Vt(new Date(e),"MMM"),won:r[e].filter((e=>"won"===e.stage)).reduce(((e,t)=>e+=t.amount),0),pending:r[e].filter((e=>!["won","lost"].includes(e.stage))).reduce(((e,t)=>e+=t.amount*un[t.stage]),0),lost:r[e].filter((e=>"lost"===e.stage)).reduce(((e,t)=>e-=t.amount),0)})));n(a)}),[t,e]),!r)return null;const o=a.reduce(((e,t)=>(e.min=Math.min(e.min,t.lost),e.max=Math.max(e.max,t.won+t.pending),e)),{min:0,max:0});return p.exports.createElement(p.exports.Fragment,null,p.exports.createElement(R,{display:"flex",alignItems:"center"},p.exports.createElement(R,{ml:2,mr:2,display:"flex"},p.exports.createElement(Kt,{color:"disabled",fontSize:"large"})),p.exports.createElement(wt,{underline:"none",variant:"h5",color:"textSecondary",component:q,to:"/deals"},"Upcoming Deal Revenue")),p.exports.createElement(R,{height:500},p.exports.createElement(Qt,{data:a,indexBy:"date",keys:["won","pending","lost"],colors:["#61cdbb","#97e3d5","#e25c3b"],margin:{top:50,right:50,bottom:50,left:0},padding:.3,valueScale:{type:"linear",min:1.2*o.min,max:1.2*o.max},indexScale:{type:"band",round:!0},enableGridX:!0,enableGridY:!1,enableLabel:!1,axisTop:{tickSize:0,tickPadding:12},axisBottom:{legendPosition:"middle",legendOffset:50,tickSize:0,tickPadding:12},axisLeft:null,axisRight:{format:e=>`${Math.abs(e/1e3)}k`,tickValues:8},markers:[{axis:"y",value:0,lineStyle:{strokeOpacity:0},textStyle:{fill:"#2ebca6"},legend:"Won",legendPosition:"top-left",legendOrientation:"vertical"},{axis:"y",value:0,lineStyle:{stroke:"#f47560",strokeWidth:1},textStyle:{fill:"#e25c3b"},legend:"Lost",legendPosition:"bottom-left",legendOrientation:"vertical"}]})))},En=()=>{const{identity:e}=Pe(),{data:t,ids:r,total:a,loaded:n}=Z("contacts",{page:1,perPage:10},{field:"last_seen",order:"DESC"},{status:"hot",sales_id:null==e?void 0:e.id},{enabled:Number.isInteger(null==e?void 0:e.id)});return p.exports.createElement(p.exports.Fragment,null,p.exports.createElement(R,{display:"flex",alignItems:"center",marginBottom:"1em"},p.exports.createElement(R,{ml:2,mr:2,display:"flex"},p.exports.createElement(Zt,{color:"disabled",fontSize:"large"})),p.exports.createElement(wt,{underline:"none",variant:"h5",color:"textSecondary",component:q,to:"/contacts"},"Hot contacts")),p.exports.createElement(v,null,p.exports.createElement(er,{basePath:"/contacts",linkType:"show",ids:r,data:t,total:a,loaded:n,primaryText:e=>`${e.first_name} ${e.last_name}`,secondaryText:e=>ot(new Date(e.last_seen),new Date,{addSuffix:!0}),leftAvatar:e=>p.exports.createElement(Fr,{record:e})})))},fn=N((e=>({note:{marginBottom:e.spacing(2)},noteText:{backgroundColor:"#edf3f0",padding:e.spacing(1),borderRadius:10},noteTextText:{display:"-webkit-box","-webkit-line-clamp":3,"-webkit-box-orient":"vertical",overflow:"hidden"}}))),gn=()=>{const e=fn(),{identity:t}=Pe(),{data:r,ids:a,loaded:n}=Z("contactNotes",{page:1,perPage:5},{field:"date",order:"DESC"},{sales_id:null==t?void 0:t.id},{enabled:Number.isInteger(null==t?void 0:t.id)}),{data:o,ids:l,loaded:i}=Z("dealNotes",{page:1,perPage:5},{field:"date",order:"DESC"},{sales_id:null==t?void 0:t.id},{enabled:Number.isInteger(null==t?void 0:t.id)});if(!n||!i)return null;if(!(a&&r&&l&&o))return null;const m=[].concat(a.map((e=>c(s({},r[e]),{type:"contactNote"}))),l.map((e=>c(s({},o[e]),{type:"dealNote"})))).sort(((e,t)=>new Date(t.date).valueOf()-new Date(e.date).valueOf())).slice(0,5);return p.exports.createElement(p.exports.Fragment,null,p.exports.createElement(R,{display:"flex",alignItems:"center",marginBottom:"1em"},p.exports.createElement(R,{ml:2,mr:2,display:"flex"},p.exports.createElement(tr,{color:"disabled",fontSize:"large"})),p.exports.createElement(M,{variant:"h5",color:"textSecondary"},"My Latest Notes")),p.exports.createElement(v,null,p.exports.createElement(Fe,null,m.map((t=>p.exports.createElement("div",{id:`${t.type}_${t.id}`,key:`${t.type}_${t.id}`,className:e.note},p.exports.createElement(M,{color:"textSecondary",gutterBottom:!0},"on"," ","dealNote"===t.type?p.exports.createElement(bn,{note:t}):p.exports.createElement(hn,{note:t}),", added"," ",ot(new Date(t.date),new Date,{addSuffix:!0})),p.exports.createElement("div",{className:e.noteText},p.exports.createElement(M,{className:e.noteTextText},t.text))))))))},bn=({note:e})=>p.exports.createElement(p.exports.Fragment,null,"Deal"," ",p.exports.createElement(be,{record:e,source:"deal_id",reference:"deals",basePath:"/deals",link:"show"},p.exports.createElement(fe,{source:"name",variant:"body1"}))),hn=({note:e})=>p.exports.createElement(p.exports.Fragment,null,"Contact"," ",p.exports.createElement(be,{record:e,source:"contact_id",reference:"contacts",basePath:"/contacts",link:"show"},p.exports.createElement(he,{variant:"body1",render:e=>e?`${e.first_name} ${e.last_name}`:""}))),yn=()=>{const{identity:e}=Pe(),{data:t,ids:r,total:a,loaded:n}=Z("deals",{page:1,perPage:10},{field:"last_seen",order:"DESC"},{stage_neq:"lost",sales_id:null==e?void 0:e.id},{enabled:Number.isInteger(null==e?void 0:e.id)}),[o,l]=p.exports.useState(r);return p.exports.useEffect((()=>{const e=r.map((e=>t[e])),a=[];La.filter((e=>"won"!==e)).forEach((t=>e.filter((e=>e.stage===t)).forEach((e=>a.push(e.id))))),l(a)}),[r,t]),p.exports.createElement(p.exports.Fragment,null,p.exports.createElement(R,{display:"flex",alignItems:"center",marginBottom:"1em"},p.exports.createElement(R,{ml:2,mr:2,display:"flex"},p.exports.createElement(Nt,{color:"disabled",fontSize:"large"})),p.exports.createElement(wt,{underline:"none",variant:"h5",color:"textSecondary",component:q,to:"/deals"},"Deals Pipeline")),p.exports.createElement(v,null,p.exports.createElement(er,{basePath:"/deals",linkType:"show",ids:o,data:t,total:a,loaded:n,primaryText:e=>e.name,secondaryText:e=>`${e.amount.toLocaleString("en-US",{notation:"compact",style:"currency",currency:"USD",currencyDisplay:"narrowSymbol",minimumSignificantDigits:3})} , ${Aa[e.stage]}`,leftAvatar:e=>p.exports.createElement(be,{source:"company_id",record:e,reference:"companies",resource:"deals",basePath:"/deals",link:!1},p.exports.createElement(ba,{size:"small"}))})))},vn=()=>p.exports.createElement(p.exports.Fragment,null,p.exports.createElement(R,{display:"flex",mt:"2em"},p.exports.createElement(xn,null)),p.exports.createElement(R,{display:"flex",mt:"2em"},p.exports.createElement(R,{flex:"1",mr:"1em"},p.exports.createElement(gn,null)),p.exports.createElement(R,{flex:"1",display:"flex"},p.exports.createElement(R,{flex:"1",mr:"1em"},p.exports.createElement(En,null)),p.exports.createElement(R,{flex:"1"},p.exports.createElement(yn,null))))),wn=g(k),_n=rr(),Sn=()=>p.exports.createElement(ar,{dataProvider:Pr,authProvider:Or,layout:jr,dashboard:vn,theme:wn,loginPage:Cr,customRoutes:_r,history:_n},p.exports.createElement(nr,s({name:"deals"},pn)),p.exports.createElement(nr,s({name:"contacts"},Ea)),p.exports.createElement(nr,s({name:"companies"},Ua)),p.exports.createElement(nr,{name:"contactNotes"}),p.exports.createElement(nr,{name:"dealNotes"}),p.exports.createElement(nr,{name:"tasks",list:or}),p.exports.createElement(nr,{name:"sales",list:or}),p.exports.createElement(nr,{name:"tags",list:or})),kn={};var Cn,Nn,Pn;lr.render(b.createElement(b.StrictMode,null,b.createElement(Sn,null)),document.getElementById("root")),Cn&&Cn instanceof Function&&(Nn=()=>import("./web-vitals.a5292a3a.js"),Pn=[],Pn&&0!==Pn.length?Promise.all(Pn.map((e=>{if((e=`/${e}`)in kn)return;kn[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>Nn())):Nn()).then((({getCLS:e,getFID:t,getFCP:r,getLCP:a,getTTFB:n})=>{e(Cn),t(Cn),r(Cn),a(Cn),n(Cn)}));
